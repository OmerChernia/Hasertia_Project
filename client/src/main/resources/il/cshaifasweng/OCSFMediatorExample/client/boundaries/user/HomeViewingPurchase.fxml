<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800" prefWidth="1000" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="il.cshaifasweng.OCSFMediatorExample.client.boundaries.user.HomeViewingPurchaseBoundary">
    <!-- Top section with tabs and movie details -->
    <top>
        <VBox>
            <HBox alignment="CENTER" spacing="10" style="-fx-background-color: #2e2e85; -fx-padding: 10px;">
                <Label fx:id="step2Label" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 0 20 0 20;" text="1" />
                <Label fx:id="step2Text" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 0 20 0 20;" text="Select Package" />
                <Label fx:id="step3Label" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 0 20 0 20;" text="2" />
                <Label fx:id="step3Text" style="-fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 0 20 0 20;" text="Payment Details" />
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #3e3e3e; -fx-padding: 10px;">
                <ImageView fx:id="movieImage" fitHeight="50" fitWidth="50" pickOnBounds="true" preserveRatio="true" />
                <Label fx:id="movieTitle" style="-fx-text-fill: white; -fx-font-size: 16px;" />
                <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text=" | " />
                <Label fx:id="movieLocation" style="-fx-text-fill: white; -fx-font-size: 16px;" />
                <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text=" | " />
                <Label fx:id="movieTime" style="-fx-text-fill: white; -fx-font-size: 16px;" />
                <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text=" | " />
                <Label fx:id="movieHall" style="-fx-text-fill: white; -fx-font-size: 16px;" />
            </HBox>
        </VBox>
    </top>

    <!-- Center section with stack pane for different steps -->
    <center>
        <StackPane fx:id="stackPane">
            <!-- Step 1: Ticket Selection -->
            <VBox fx:id="ticketSelectionPane" alignment="TOP_CENTER" spacing="20" style="-fx-padding: 20px;">
                <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #ffffff;" text="Select Package" />
                <Label style="-fx-font-size: 18px; -fx-text-fill: #ffffff; " text="Regular Package - â‚ª47.90" />
                <Button onAction="#goToPaymentDetails" style="-fx-background-color: white;-fx-text-fill: black;" text="Next" />
                <!-- ID/Phone Fields -->
                <VBox fx:id="idPhonePane" alignment="CENTER" spacing="10" style="-fx-padding: 20px;" visible="false">
                    <Label style="-fx-font-size: 18px;" text="Enter ID or Phone Number" />
                    <GridPane hgap="10" vgap="10">
                        <Label text="ID Number:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="idField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <Label text="Phone Number:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="phoneField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>
                    <Button onAction="#goToPaymentDetails" text="Next" />
                    <Button onAction="#hideIdPhoneFields" text="Cancel" />
                </VBox>
            </VBox>

            <!-- Step 2: Payment Details -->
            <VBox fx:id="paymentDetailsPane" alignment="TOP_CENTER" spacing="20" style="-fx-padding: 20px;">
                <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: red;" text="Payment Details" />
                <Label fx:id="timerLabel" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #f4efef;" text="10:00" />
                <GridPane alignment="CENTER" hgap="10" vgap="10">
                    <Label style="-fx-text-fill: white" text="First Name:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <TextField fx:id="firstNameTF" style="-fx-text-fill: white" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                    <Label style="-fx-text-fill: white" text="Last Name:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <TextField fx:id="lastNameTF" style="-fx-text-fill: white" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                    <Label style="-fx-text-fill: white" text="ID Number:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                    <TextField fx:id="idNumberTF" style="-fx-text-fill: white" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                    <Label style="-fx-text-fill: white" text="Confirm ID Number" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                    <TextField fx:id="confirmIdNumberTF" style="-fx-text-fill: white" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                    <Label style="-fx-text-fill: white" text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                    <TextField fx:id="emailTF" style="-fx-text-fill: white" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                    <Label style="-fx-text-fill: white" text="Confirm Email:" GridPane.columnIndex="0" GridPane.rowIndex="5" />
                    <TextField fx:id="confirmEmailTF" style="-fx-text-fill: white" GridPane.columnIndex="1" GridPane.rowIndex="5" />
                    <columnConstraints>
                        <ColumnConstraints />
                        <ColumnConstraints />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>
                <Button onAction="#showCreditCardFields" style="-fx-background-color: black;" text="Next" />
                <Button onAction="#goToTicketSelection" style="-fx-background-color: gray;" text="Back" />

                <!-- Credit Card Fields -->
                <VBox fx:id="creditCardPane" alignment="CENTER" spacing="10" style="-fx-padding: 20px; -fx-background-color: white; -fx-border-color: black;" visible="false">
                    <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Credit Card Details" />
                    <GridPane hgap="10" vgap="10">
                        <Label text="Card Number:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <TextField fx:id="cardNumberField" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                        <Label text="Expiration Date:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                        <TextField fx:id="expirationDateField" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <Label text="CVV:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                        <TextField fx:id="cvvField" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>
                    <Button onAction="#submitPayment" text="Submit" />
                    <Button onAction="#cancelPayment" text="Cancel" />
                </VBox>
            <GridPane fx:id="nodetails" alignment="CENTER" hgap="10" layoutX="30.0" layoutY="140.0" vgap="10">
               <columnConstraints>
                  <ColumnConstraints />
                  <ColumnConstraints />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
               <children>
                  <VBox prefHeight="89.0" prefWidth="234.0">
                     <children>
                        <Label fx:id="connectedText" prefHeight="17.0" prefWidth="210.0" style="-fx-text-fill: white" visible="false" />
                        <Button onAction="#showCreditCardFields" style="-fx-background-color: black;" text="Next" />
                     </children>
                  </VBox>
               </children>
            </GridPane>
            </VBox>

            <!-- Step 3: Ticket Confirmation -->
            <VBox fx:id="ticketConfirmationPane" alignment="TOP_CENTER" spacing="20" style="-fx-padding: 20px;">
                <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: green;" text="Package Confirmation" />
                <ImageView fx:id="confirmationMovieImage" fitHeight="100" fitWidth="100" pickOnBounds="true" preserveRatio="true" />
                <Label fx:id="confirmationDetails" style="-fx-font-size: 18px;" />
                <Label fx:id="pricePaidLabel" style="-fx-font-size: 18px;" />
                <Button onAction="#closeApplication" style="-fx-background-color: gray;" text="Close" />
            </VBox>
        </StackPane>
    </center>

    <!-- Bottom section with navigation buttons -->
    <bottom>
        <HBox alignment="CENTER" spacing="10" style="-fx-padding: 10px;">
            <Button onAction="#goToNextStep" style="-fx-background-color: white;-fx-text-fill: black;" text="Next" />
            <Button onAction="#goToPreviousStep" style="-fx-background-color: white;-fx-text-fill: black;" text="Back" />
        </HBox>
    </bottom>
</BorderPane>
